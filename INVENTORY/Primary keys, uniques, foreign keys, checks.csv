schema_name,table_name,constraint_name,definition,contype
app,user_state,user_state_pkey,PRIMARY KEY (user_id),p
app,user_state,user_state_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
app2,coach_audit,coach_audit_pkey,PRIMARY KEY (id),p
app2,coach_audit,coach_audit_session_exercise_id_fkey,FOREIGN KEY (session_exercise_id) REFERENCES app2.session_exercises(id) ON DELETE SET NULL,f
app2,coach_audit,coach_audit_session_id_fkey,FOREIGN KEY (session_id) REFERENCES app2.sessions(id) ON DELETE SET NULL,f
app2,coach_audit,coach_audit_user_id_fkey,FOREIGN KEY (user_id) REFERENCES app2.profiles(user_id) ON DELETE CASCADE,f
app2,logged_sets,logged_sets_pkey,PRIMARY KEY (id),p
app2,logged_sets,logged_sets_session_exercise_id_fkey,FOREIGN KEY (session_exercise_id) REFERENCES app2.session_exercises(id) ON DELETE CASCADE,f
app2,plans,plans_frequency_days_per_week_check,CHECK (frequency_days_per_week >= 1 AND frequency_days_per_week <= 6),c
app2,plans,plans_pkey,PRIMARY KEY (id),p
app2,plans,plans_session_duration_min_check,CHECK (session_duration_min >= 0),c
app2,plans,plans_user_id_fkey,FOREIGN KEY (user_id) REFERENCES app2.profiles(user_id) ON DELETE CASCADE,f
app2,profiles,profiles_pkey,PRIMARY KEY (user_id),p
app2,profiles,profiles_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
app2,session_exercises,session_exercises_pkey,PRIMARY KEY (id),p
app2,session_exercises,session_exercises_session_id_fkey,FOREIGN KEY (session_id) REFERENCES app2.sessions(id) ON DELETE CASCADE,f
app2,sessions,sessions_pkey,PRIMARY KEY (id),p
app2,sessions,sessions_plan_id_fkey,FOREIGN KEY (plan_id) REFERENCES app2.plans(id) ON DELETE SET NULL,f
app2,sessions,sessions_user_id_fkey,FOREIGN KEY (user_id) REFERENCES app2.profiles(user_id) ON DELETE CASCADE,f
app2,sessions,uq_sessions_user_date,"UNIQUE (user_id, session_date)",u
auth,audit_log_entries,audit_log_entries_pkey,PRIMARY KEY (id),p
auth,flow_state,flow_state_pkey,PRIMARY KEY (id),p
auth,identities,identities_pkey,PRIMARY KEY (id),p
auth,identities,identities_provider_id_provider_unique,"UNIQUE (provider_id, provider)",u
auth,identities,identities_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
auth,instances,instances_pkey,PRIMARY KEY (id),p
auth,mfa_amr_claims,amr_id_pk,PRIMARY KEY (id),p
auth,mfa_amr_claims,mfa_amr_claims_session_id_authentication_method_pkey,"UNIQUE (session_id, authentication_method)",u
auth,mfa_amr_claims,mfa_amr_claims_session_id_fkey,FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE,f
auth,mfa_challenges,mfa_challenges_auth_factor_id_fkey,FOREIGN KEY (factor_id) REFERENCES auth.mfa_factors(id) ON DELETE CASCADE,f
auth,mfa_challenges,mfa_challenges_pkey,PRIMARY KEY (id),p
auth,mfa_factors,mfa_factors_last_challenged_at_key,UNIQUE (last_challenged_at),u
auth,mfa_factors,mfa_factors_pkey,PRIMARY KEY (id),p
auth,mfa_factors,mfa_factors_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
auth,one_time_tokens,one_time_tokens_pkey,PRIMARY KEY (id),p
auth,one_time_tokens,one_time_tokens_token_hash_check,CHECK (char_length(token_hash) > 0),c
auth,one_time_tokens,one_time_tokens_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
auth,refresh_tokens,refresh_tokens_pkey,PRIMARY KEY (id),p
auth,refresh_tokens,refresh_tokens_session_id_fkey,FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE,f
auth,refresh_tokens,refresh_tokens_token_unique,UNIQUE (token),u
auth,saml_providers,entity_id not empty,CHECK (char_length(entity_id) > 0),c
auth,saml_providers,metadata_url not empty,CHECK (metadata_url = NULL::text OR char_length(metadata_url) > 0),c
auth,saml_providers,metadata_xml not empty,CHECK (char_length(metadata_xml) > 0),c
auth,saml_providers,saml_providers_entity_id_key,UNIQUE (entity_id),u
auth,saml_providers,saml_providers_pkey,PRIMARY KEY (id),p
auth,saml_providers,saml_providers_sso_provider_id_fkey,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,f
auth,saml_relay_states,request_id not empty,CHECK (char_length(request_id) > 0),c
auth,saml_relay_states,saml_relay_states_flow_state_id_fkey,FOREIGN KEY (flow_state_id) REFERENCES auth.flow_state(id) ON DELETE CASCADE,f
auth,saml_relay_states,saml_relay_states_pkey,PRIMARY KEY (id),p
auth,saml_relay_states,saml_relay_states_sso_provider_id_fkey,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,f
auth,schema_migrations,schema_migrations_pkey,PRIMARY KEY (version),p
auth,sessions,sessions_pkey,PRIMARY KEY (id),p
auth,sessions,sessions_user_id_fkey,FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE,f
auth,sso_domains,domain not empty,CHECK (char_length(domain) > 0),c
auth,sso_domains,sso_domains_pkey,PRIMARY KEY (id),p
auth,sso_domains,sso_domains_sso_provider_id_fkey,FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE,f
auth,sso_providers,resource_id not empty,CHECK (resource_id = NULL::text OR char_length(resource_id) > 0),c
auth,sso_providers,sso_providers_pkey,PRIMARY KEY (id),p
auth,users,users_email_change_confirm_status_check,CHECK (email_change_confirm_status >= 0 AND email_change_confirm_status <= 2),c
auth,users,users_phone_key,UNIQUE (phone),u
auth,users,users_pkey,PRIMARY KEY (id),p
preserve,exercise_library,exercise_library_pkey,PRIMARY KEY (id),p
preserve,exercise_library_i18n,exercise_library_i18n_exercise_id_fkey,FOREIGN KEY (exercise_id) REFERENCES preserve.exercise_library(id) ON DELETE CASCADE,f
preserve,exercise_library_i18n,exercise_library_i18n_exercise_id_locale_key,"UNIQUE (exercise_id, locale)",u
preserve,exercise_library_i18n,exercise_library_i18n_locale_check,CHECK (locale ~ '^[a-z]{2}(-[A-Z]{2})?$'::text),c
preserve,exercise_library_i18n,exercise_library_i18n_pkey,"PRIMARY KEY (exercise_id, locale)",p
preserve,exercise_variant_i18n,exercise_variant_i18n_locale_check,CHECK (locale ~ '^[a-z]{2}(-[A-Z]{2})?$'::text),c
preserve,exercise_variant_i18n,exercise_variant_i18n_variant_id_fkey,FOREIGN KEY (variant_id) REFERENCES preserve.exercise_variants(id) ON DELETE CASCADE,f
preserve,exercise_variant_i18n,exercise_variant_i18n_variant_id_locale_key,"UNIQUE (variant_id, locale)",u
preserve,exercise_variants,exercise_variants_exercise_id_fkey,FOREIGN KEY (exercise_id) REFERENCES preserve.exercise_library(id) ON DELETE CASCADE,f
preserve,exercise_variants,exercise_variants_pkey,PRIMARY KEY (id),p
preserve,exercise_variants,exercise_variants_unique_name_per_ex,"UNIQUE (exercise_id, name)",u
realtime,messages,messages_pkey,"PRIMARY KEY (id, inserted_at)",p
realtime,schema_migrations,schema_migrations_pkey,PRIMARY KEY (version),p
realtime,subscription,pk_subscription,PRIMARY KEY (id),p
storage,buckets,buckets_pkey,PRIMARY KEY (id),p
storage,buckets_analytics,buckets_analytics_pkey,PRIMARY KEY (id),p
storage,migrations,migrations_name_key,UNIQUE (name),u
storage,migrations,migrations_pkey,PRIMARY KEY (id),p
storage,objects,objects_bucketId_fkey,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),f
storage,objects,objects_pkey,PRIMARY KEY (id),p
storage,prefixes,prefixes_bucketId_fkey,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),f
storage,prefixes,prefixes_pkey,"PRIMARY KEY (bucket_id, level, name)",p
storage,s3_multipart_uploads,s3_multipart_uploads_bucket_id_fkey,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),f
storage,s3_multipart_uploads,s3_multipart_uploads_pkey,PRIMARY KEY (id),p
storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_bucket_id_fkey,FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id),f
storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_pkey,PRIMARY KEY (id),p
storage,s3_multipart_uploads_parts,s3_multipart_uploads_parts_upload_id_fkey,FOREIGN KEY (upload_id) REFERENCES storage.s3_multipart_uploads(id) ON DELETE CASCADE,f
supabase_migrations,schema_migrations,schema_migrations_idempotency_key_key,UNIQUE (idempotency_key),u
supabase_migrations,schema_migrations,schema_migrations_pkey,PRIMARY KEY (version),p
supabase_migrations,seed_files,seed_files_pkey,PRIMARY KEY (path),p
vault,secrets,secrets_pkey,PRIMARY KEY (id),p